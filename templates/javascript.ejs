<%_

function printCall(name, route, inputs, pre) {
    return (pre ? name + " = " : "") + `function${ pre ? "" : " " + name }(${ Object.keys(inputs).join(', ') }, cb) {\n` +
    `    gencall("${ route[0] }", "${ route[1] }", { ${ Object.keys(inputs).map(function(key) { return key + ": " + key }).join(', ') } }, cb);\n` +
    `}`;
}

_%>


<%_
    routers.map("namespace").unique().compact(true).forEach(function(namespace) {
_%>
var <%= namespace %> = { };
<%_
    })

    routers.forEach(function(router) {
        router.calls.forEach(function(call) {
            if (call.routes.length > 0) {
_%>

<%_
                call.routes.forEach(function(route) {
_%>

<%_
                });
            }
        });
    });
_%>